<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ExScroller Game Studio 2</title>
  <link rel="stylesheet" href="/src/styles.css">
</head>
<body>
  <div id="app">
    <!-- Header -->
    <header class="header">
      <h1>ExScroller Studio 2</h1>
      <div class="header-actions">
        <button id="btnConnect">Connect</button>
        <button id="btnTest" disabled>Test</button>
        <button id="btnPrint" disabled>Print</button>
        <span id="status" class="status">Not connected</span>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main">
      <!-- Left: Toolbox -->
      <aside class="toolbox">
        <h3>Objects</h3>
        <button class="tool-btn" data-tool="text">T Text</button>
        <button class="tool-btn" data-tool="rect">▢ Rectangle</button>
        <button class="tool-btn" data-tool="circle">○ Circle</button>
        <button class="tool-btn" data-tool="line">╱ Line</button>
        <button class="tool-btn" data-tool="image">▣ Image</button>
        <button class="tool-btn" data-tool="sprite">◈ Sprite</button>

        <h3>Sections</h3>
        <div id="sectionList"></div>
        <button id="btnAddSection">+ Add Section</button>
      </aside>

      <!-- Center: Canvas / Code -->
      <div class="editor-area">
        <div class="editor-tabs">
          <button class="tab active" data-tab="visual">Visual</button>
          <button class="tab" data-tab="code">Code</button>
          <button class="tab" data-tab="split">Split</button>
        </div>

        <div class="editor-content">
          <!-- Visual Editor -->
          <div id="visualEditor" class="editor-pane">
            <div id="canvasContainer">
              <div id="receiptCanvas"></div>
            </div>
          </div>

          <!-- Code Editor -->
          <div id="codeEditor" class="editor-pane hidden">
            <textarea id="codeArea" spellcheck="false"></textarea>
          </div>
        </div>
      </div>

      <!-- Right: Properties -->
      <aside class="properties">
        <h3>Properties</h3>
        <div id="propPanel">
          <p class="hint">Select an object to edit properties</p>
        </div>

        <h3>Preview</h3>
        <div id="previewContainer">
          <canvas id="previewCanvas" width="576" height="200"></canvas>
        </div>

        <h3>Printer</h3>
        <div id="printerPanel" class="printer-panel">
          <div class="control-row">
            <label>Speed</label>
            <input type="range" id="speedSlider" min="1000" max="15000" value="8000" step="500">
            <span id="speedValue">8000</span> pps
          </div>
          <div class="control-row">
            <label>Heat</label>
            <input type="range" id="heatSlider" min="100" max="1500" value="500" step="50">
            <span id="heatValue">500</span> μs
          </div>
        </div>
      </aside>
    </main>
  </div>

  <!-- ExScroller SDK (loaded globally) -->
  <script type="module">
    // Import SDK and expose globally before main.js loads
    import * as ExScrollerSDK from 'https://exscroller.yu20.workers.dev/sdk/exscroller.js';
    window.ExScrollerSDK = ExScrollerSDK;
    console.log('[Studio] SDK loaded:', Object.keys(ExScrollerSDK));
  </script>
  <script type="module" src="/src/main.js"></script>
</body>
</html>
